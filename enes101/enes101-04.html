<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IOU Module 4 Simulation</title>
    <style>
        :root {
            --bg-color: #121212;
            --card-color: #1e1e1e;
            --text-primary: #e0e0e0;
            --text-secondary: #a0a0a0;
            --accent-color: #4da6ff;
            --correct-color: #4caf50;
            --wrong-color: #f44336;
            --border-radius: 12px;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-primary);
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            min-height: 100vh;
        }

        .container {
            width: 100%;
            max-width: 600px;
        }

        /* Header */
        header {
            text-align: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #333;
        }

        h1 { font-size: 1.5rem; margin: 0; color: var(--accent-color); }
        p.subtitle { color: var(--text-secondary); font-size: 0.9rem; margin-top: 5px; }

        /* Card Style */
        .card {
            background-color: var(--card-color);
            border-radius: var(--border-radius);
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            margin-bottom: 20px;
        }

        .video-label {
            display: inline-block;
            background-color: #333;
            color: #fff;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8rem;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .question-text {
            font-size: 1.1rem;
            margin-bottom: 15px;
            line-height: 1.5;
        }

        /* Options */
        .options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-label {
            display: flex;
            align-items: flex-start;
            padding: 12px;
            border: 1px solid #333;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.2s;
        }

        .option-label:hover {
            background-color: #2c2c2c;
        }

        .option-label input {
            margin-top: 4px;
            margin-right: 12px;
            accent-color: var(--accent-color);
        }

        /* Buttons */
        .btn {
            background-color: var(--accent-color);
            color: #000;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            font-size: 1rem;
            margin-top: 10px;
        }
        
        /* Tombol Navigasi Khusus */
        .btn-nav {
            background-color: #333; 
            color: #fff; 
            border: 1px solid #555;
            margin-bottom: 10px;
        }

        .btn:hover { opacity: 0.9; }
        .btn:disabled { background-color: #555; cursor: not-allowed; }

        /* Results & Review */
        .result-box {
            text-align: center;
            padding: 30px;
        }
        
        .score-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2rem;
            font-weight: bold;
            color: var(--accent-color);
            border: 4px solid var(--accent-color);
        }

        .review-item {
            background-color: #252525;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 5px solid #555;
            text-align: left;
        }

        .review-item.correct { border-left-color: var(--correct-color); }
        .review-item.wrong { border-left-color: var(--wrong-color); }

        .review-explanation {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #444;
            font-size: 0.95rem;
            color: #ccc;
        }
        
        .indonesian-flag {
            font-size: 0.8rem;
            color: #ff9800;
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        /* Navigation Steps */
        .step { display: none; }
        .step.active { display: block; }

    </style>
</head>
<body>

<div class="container">
    <header>
        <h1>IOU Module 4 Simulation</h1>
        <p class="subtitle">Annotating Texts</p>
    </header>

    <form id="quizForm">
        <div id="quiz-container"></div>
    </form>
</div>

<script>
    // DATA SOAL (Module 4a - 4f)
    const quizData = [
        {
            video: "Video 4a: Introduction to Annotating",
            questions: [
                {
                    id: 1,
                    text: "What common mistake does the instructor critique regarding highlighting texts?",
                    options: [
                        "Using too many different colors of highlighters.",
                        "Highlighting entire sentences, which clutters the text.",
                        "Not highlighting enough information.",
                        "Using a pen instead of a highlighter."
                    ],
                    correct: 1, // Option B
                    explanation: "Instruktur mengkritik kebiasaan menyorot seluruh kalimat ('highlighting entire sentences') karena membuat teks penuh sesak dan sulit ditinjau ulang."
                },
                {
                    id: 2,
                    text: "According to the lecture, a 'Topic Sentence' is defined as:",
                    options: [
                        "The last sentence of a paragraph that concludes the thought.",
                        "A sentence found in the middle of a paragraph.",
                        "The sentence that carries the main idea in each paragraph.",
                        "Any sentence that contains a difficult vocabulary word."
                    ],
                    correct: 2, // Option C
                    explanation: "Kalimat Topik didefinisikan sebagai kalimat yang membawa gagasan utama ('carries the main idea') dalam setiap paragraf."
                }
            ]
        },
        {
            video: "Video 4b: Effective Strategies",
            questions: [
                {
                    id: 3,
                    text: "In the 'IMPM' passage, the text mentions 'five on-site modules of approximately 2 weeks each, spread over 16 months'. What should be highlighted?",
                    options: [
                        "Only '16 months'.",
                        "Only 'five on-site modules'.",
                        "All of the given answers (all specific facts).",
                        "None of the answers."
                    ],
                    correct: 2, // Option C
                    explanation: "Untuk peninjauan yang akurat, semua detail fakta spesifik (5 modul, 2 minggu, 16 bulan) harus disorot. Jadi jawabannya 'All of the given answers'."
                },
                {
                    id: 4,
                    text: "When annotating a text, which situation would NOT require you to underline or highlight?",
                    options: [
                        "Information that is new to you.",
                        "Information that is critical for the exam.",
                        "Information that you already know.",
                        "Technical terminology."
                    ],
                    correct: 2, // Option C
                    explanation: "Anda tidak perlu menyorot informasi yang sudah Anda ketahui ('Information that you already know') karena tujuan anotasi adalah mempelajari hal baru."
                }
            ]
        },
        {
            video: "Video 4c: Cultural Texts",
            questions: [
                {
                    id: 5,
                    text: "In the text about Hindu Weddings, what is the significance of the 'Mangal Sutra' given by the groom?",
                    options: [
                        "It is a ring that the bride wears only on special occasions.",
                        "It is a necklace that the bride never removes while her husband is alive.",
                        "It is a red dress worn by the bride during the ceremony.",
                        "It is a promise made by the groom to the bride's father."
                    ],
                    correct: 1, // Option B
                    explanation: "Mangal Sutra adalah kalung ('necklace') yang diberikan pengantin pria dan tidak pernah dilepas pengantin wanita selama suaminya masih hidup."
                },
                {
                    id: 6,
                    text: "Critical thinking during annotation involves asking questions. Which question was suggested regarding the groom's arrival on a white horse?",
                    options: [
                        "Do they still use a white horse if they live in a modern city?",
                        "How much does it cost to rent a white horse?",
                        "Is the horse trained to dance during the wedding?",
                        "Why is the horse white and not brown?"
                    ],
                    correct: 0, // Option A
                    explanation: "Instruktur menyarankan pertanyaan kritis di pinggir teks: 'Apakah mereka masih pakai kuda putih jika di kota modern?'"
                }
            ]
        },
        {
            video: "Video 4d: Descriptive Texts",
            questions: [
                {
                    id: 7,
                    text: "The 'Double-Entry Journal' method involves creating two columns. What goes in the second column?",
                    options: [
                        "A summary of the entire chapter.",
                        "The student's personal reactions or thoughts to the text points.",
                        "A list of vocabulary words found in the dictionary.",
                        "The translation of the text into another language."
                    ],
                    correct: 1, // Option B
                    explanation: "Metode Jurnal Entri Ganda: Kolom pertama untuk poin teks, kolom kedua untuk reaksi/pikiran pribadi siswa ('personal reactions')."
                },
                {
                    id: 8,
                    text: "In the Havasu Canyon text, the phrase 'Villagers stare without smiling' prompted which personal reaction in the example?",
                    options: [
                        "They seem very happy.",
                        "They seem unfriendly.",
                        "They are tired from working.",
                        "They are waiting for a bus."
                    ],
                    correct: 1, // Option B
                    explanation: "Contoh reaksi untuk 'menatap tanpa tersenyum' adalah 'They seem unfriendly' (Mereka tampak tidak ramah)."
                }
            ]
        },
        {
            video: "Video 4e: Islamic Texts",
            questions: [
                {
                    id: 9,
                    text: "If reading an Islamic book, it is important to highlight:",
                    options: [
                        "Terminology",
                        "Ayah (Verses)",
                        "Hadith",
                        "All of the given answers"
                    ],
                    correct: 3, // Option D
                    explanation: "Dalam teks Islam, elemen kunci yang wajib disorot adalah Terminologi, Ayat, dan Hadith. Jadi 'All of the given answers' benar."
                },
                {
                    id: 10,
                    text: "When annotating the term 'Nikah', what distinction should be made?",
                    options: [
                        "Between its linguistic meaning and its technical meaning.",
                        "Between its spelling in Arabic and English.",
                        "Between its usage in the past and present.",
                        "There is no distinction to be made."
                    ],
                    correct: 0, // Option A
                    explanation: "Penting membedakan makna linguistik (bahasa) dan makna teknis (istilah syar'i) dari kata seperti 'Nikah'."
                }
            ]
        },
        {
            video: "Video 4f: Fiqh Rulings",
            questions: [
                {
                    id: 11,
                    text: "According to the Fiqh rulings on marriage, who is the first person in the hierarchy to be a woman's Wali?",
                    options: [
                        "Her brother",
                        "Her grandfather",
                        "Her father",
                        "The Islamic ruler"
                    ],
                    correct: 2, // Option C
                    explanation: "Ayah ('Father') adalah orang pertama dalam urutan wali. Jika tidak ada, baru pindah ke kakek atau saudara."
                },
                {
                    id: 12,
                    text: "Highlighting the phrase 'Abstract - this is a brief summary found at the top of the first page' focuses on which part?",
                    options: [
                        "Brief summary",
                        "Below the title",
                        "Found at top of first page",
                        "All of the given answers might be relevant depending on the question"
                    ],
                    correct: 0, // Option A (Based on screenshot logic)
                    explanation: "Berdasarkan screenshot, bagian terpenting dari definisi Abstrak untuk di-highlight adalah intinya: 'Brief summary' (Ringkasan singkat)."
                }
            ]
        }
    ];

    let currentVideoIndex = 0;
    const userAnswers = {};

    function initQuiz() {
        const container = document.getElementById('quiz-container');
        
        quizData.forEach((section, index) => {
            const stepDiv = document.createElement('div');
            stepDiv.className = `step ${index === 0 ? 'active' : ''}`;
            stepDiv.id = `step-${index}`;

            let html = `<div class="card">
                <span class="video-label">${section.video}</span>`;

            section.questions.forEach(q => {
                html += `
                <div style="margin-top: 20px; border-top: 1px solid #333; padding-top:20px;">
                    <p class="question-text"><strong>${q.id}.</strong> ${q.text}</p>
                    <div class="options">
                        ${q.options.map((opt, i) => `
                            <label class="option-label">
                                <input type="radio" name="q${q.id}" value="${i}">
                                <span>${opt}</span>
                            </label>
                        `).join('')}
                    </div>
                </div>`;
            });

            html += `</div>`; 

            if (index < quizData.length - 1) {
                html += `<button type="button" class="btn" onclick="nextStep(${index})">Next Video</button>`;
            } else {
                html += `<button type="button" class="btn" style="background-color: #4caf50; color: white;" onclick="finishQuiz()">Submit & See Score</button>`;
            }

            stepDiv.innerHTML = html;
            container.appendChild(stepDiv);
        });

        const resultDiv = document.createElement('div');
        resultDiv.id = 'result-step';
        resultDiv.className = 'step';
        container.appendChild(resultDiv);
    }

    function nextStep(currentIndex) {
        const currentQuestions = quizData[currentIndex].questions;
        let allAnswered = true;

        currentQuestions.forEach(q => {
            const selected = document.querySelector(`input[name="q${q.id}"]:checked`);
            if (!selected) allAnswered = false;
            else userAnswers[q.id] = parseInt(selected.value);
        });

        if (!allAnswered) {
            alert("Please answer all questions before proceeding.");
            return;
        }

        document.getElementById(`step-${currentIndex}`).classList.remove('active');
        document.getElementById(`step-${currentIndex + 1}`).classList.add('active');
        window.scrollTo(0,0);
    }

    function finishQuiz() {
        const lastIndex = quizData.length - 1;
        const currentQuestions = quizData[lastIndex].questions;
        let allAnswered = true;

        currentQuestions.forEach(q => {
            const selected = document.querySelector(`input[name="q${q.id}"]:checked`);
            if (!selected) allAnswered = false;
            else userAnswers[q.id] = parseInt(selected.value);
        });

        if (!allAnswered) {
            alert("Please answer all questions before submitting.");
            return;
        }

        calculateAndShowResults();
    }

    function calculateAndShowResults() {
        let score = 0;
        let total = 0;
        let reviewHTML = '';

        quizData.forEach(section => {
            section.questions.forEach(q => {
                total++;
                const userAnswer = userAnswers[q.id];
                const isCorrect = userAnswer === q.correct;
                
                if (isCorrect) score++;

                const statusClass = isCorrect ? 'correct' : 'wrong';
                const statusIcon = isCorrect ? '‚úÖ Benar' : '‚ùå Salah';
                
                reviewHTML += `
                <div class="review-item ${statusClass}">
                    <div style="font-size: 0.85rem; color: #888; margin-bottom: 5px;">${section.video}</div>
                    <div style="font-weight: bold; margin-bottom: 8px;">${q.id}. ${q.text}</div>
                    <div style="margin-bottom: 5px; color: ${isCorrect ? '#4caf50' : '#f44336'}">
                        ${statusIcon} (You answered: ${q.options[userAnswer]})
                    </div>
                    ${!isCorrect ? `<div style="color: #4caf50; font-size: 0.9rem;">Correct Answer: ${q.options[q.correct]}</div>` : ''}
                    
                    <div class="review-explanation">
                        <span class="indonesian-flag">üáÆüá© PENJELASAN:</span>
                        ${q.explanation}
                    </div>
                </div>`;
            });
        });

        const finalScore = Math.round((score / total) * 100);

        const resultContainer = document.getElementById('result-step');
        
        resultContainer.innerHTML = `
            <div class="card result-box">
                <h2>Quiz Completed!</h2>
                <div class="score-circle">${finalScore}</div>
                <p>You got ${score} out of ${total} correct.</p>
            </div>

            <button type="button" class="btn btn-nav" onclick="window.location.href='index.html'">‚¨Ö Kembali ke Menu Utama</button>
            <button type="button" class="btn" onclick="location.reload()">üîÑ Kerjakan Ulang</button>
            
            <h3 style="margin-top: 30px; border-bottom: 1px solid #444; padding-bottom: 10px;">Review & Explanation (Bahasa Indonesia)</h3>
            ${reviewHTML}
            
            <button type="button" class="btn btn-nav" onclick="window.scrollTo(0,0)" style="margin-top:20px;">‚¨Ü Kembali ke Atas</button>
        `;

        document.getElementById(`step-${quizData.length - 1}`).classList.remove('active');
        resultContainer.classList.add('active');
        window.scrollTo(0,0);
    }

    initQuiz();

</script>

</body>
</html>
